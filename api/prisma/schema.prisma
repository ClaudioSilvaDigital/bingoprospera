generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Claim {
  id             String   @id @default(cuid())
  sessionId      String
  playerId       String
  playerName     String
  layout         Json
  marks          Json
  clientHasBingo Boolean
  serverCheck    String
  declaredAt     DateTime @default(now())
  roundNumber  Int      // número da rodada na sessão
  roundRule    String   // regra usada na rodada (para auditoria)

  @@index([sessionId])
  @@index([declaredAt])
}
model Round {
  id         String   @id @default(cuid())
  sessionId  String
  number     Int
  rule       String   // "1-linha" | "2-linhas" | "cheia"
  isActive   Boolean  @default(true)
  createdAt  DateTime @default(now())
  endedAt    DateTime?

  @@index([sessionId, isActive])
  @@unique([sessionId, number])
}
